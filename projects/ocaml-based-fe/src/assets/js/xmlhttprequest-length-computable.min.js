!function(){var e={CONTENT_ENCODING_MULTIPLE:1.5,DEFAULT_CONTENT_LENGTH:1048576,DECOMPRESSED_CONTENT_LENGTH_HEADER:"x-decompressed-content-length"};if(window.Proxy){var t=XMLHttpRequest,n=function(e,t){var n=0;!n&&e["decompressed-content-length"]&&(n=e["decompressed-content-length"]);try{if(!n){var s=t.target.getResponseHeader("content-length");s&&(n=s=parseInt(s))}}catch(r){}return n||(n=e.DEFAULT_CONTENT_LENGTH),n},s=function(e,t){var s=0;return function(r){if(r&&(r instanceof ProgressEvent||e.no_type_check)&&("progress"==r.type||"load"==r.type||"loadend"==r.type)){if(!1==r.lengthComputable){var l=r;r=new Proxy(r,{get:function(t,r){return"lengthComputable"==r||("loaded"==r?(s||(s=n(e,l)),e.loadFinished)?s:Math.min(l.loaded,s-1):"total"==r?(s||(s=n(e,l)),s):(0,t[r]))}})}else e.lengthComputable=!0}e.latestProgress=r,t&&t(r)}},r={set:function(e,t,n){return e.xmlHTTPRequestLengthComputable&&0==t.indexOf("on")&&e.xmlHTTPRequestLengthComputable.listeners[t.substr(2)]?(e.xmlHTTPRequestLengthComputable.listeners[t.substr(2)].on&&delete e.xmlHTTPRequestLengthComputable.listeners[t.substr(2)].on,n?(e[t]=s(e.xmlHTTPRequestLengthComputable,n),e.xmlHTTPRequestLengthComputable.listeners[t.substr(2)].on=n):e[t]=n):e[t]=n,!0},get:function(e,t){return"addEventListener"==t?function(){if(!e.xmlHTTPRequestLengthComputable.listeners[arguments[0]])return e[t].apply(e,arguments);var n=s(e.xmlHTTPRequestLengthComputable,arguments[1]);return e.xmlHTTPRequestLengthComputable.listeners[arguments[0]].listeners.push([n,arguments[1]]),e[t].call(e,arguments[0],n,arguments[2],arguments[3])}:"removeEventListener"==t?function(){if(!e.xmlHTTPRequestLengthComputable.listeners[arguments[0]])return e[t].apply(e,arguments);for(var n=e.xmlHTTPRequestLengthComputable.listeners[arguments[0]].listeners,s=0;s<n.length;++s)if(n[s][1]==arguments[1]){var r=n.splice(s)[0];return e[t].call(e,arguments[0],r[0],arguments[2],arguments[3])}}:"function"==typeof e[t]?function(){return e[t].apply(e,arguments)}:(0,e[t])}};for(var l in window.XMLHttpRequest=function(n){var s,l=new t(n),o=new Proxy(l,r),u=window.xmlHTTPRequestLengthComputable||e;for(var a in n&&n.xmlHTTPRequestLengthComputable&&(u=n.xmlHTTPRequestLengthComputable),s={},e)s[a]=u[a]||e[a];return u["decompressed-content-length"]&&(s["decompressed-content-length"]=u["decompressed-content-length"]),s.listeners={progress:{listeners:[]},load:{listeners:[]},loadend:{listeners:[]}},l.addEventListener("load",function(e){if(!s.lengthComputable&&(s.loadFinished=!0,s.latestProgress)){s.listeners.progress.on&&s.listeners.progress.on(s.latestProgress);for(var t=s.listeners.progress.listeners,n=0;n<t.length;++n)t[n][1]&&t[n][1](s.latestProgress)}}),s.xmlhttprequest=l,o.xmlHTTPRequestLengthComputable=s,o},t)window.XMLHttpRequest[l]=t[l]}}();
